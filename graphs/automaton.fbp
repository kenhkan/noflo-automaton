EXPORT=SETUP.IN:IN
EXPORT=RUN.OUT:OUT
EXPORT=SETUP.ERROR:ERROR
EXPORT=RUN.STATUS:STATUS

# The looper

Setup(automaton/Setup) OUT -> IN Iterate(automaton/Iterate)
Iterate() OUT -> IN TestExistence(automaton/TestExistence) OUT -> IN RunActions(automaton/RunActions)
RunActions() OUT -> IN WaitForEffects(automaton/WaitForEffects) OUT -> IN TestEffects(automaton/TestEffects)
TestEffects() ERROR -> IN RunActions()
TestEffects() OUT -> IN Iterate()

# Report on exit (either success or failure)

TestExistence() EXIT -> IN Run(automaton/Run)
TestEffects() EXIT -> IN Run()
Iterate() EXIT -> IN Run()
